Popup=function(){return Popup=function(o){o=o||{},this.windowModalname=o.windowModalName||"PopupWindowModal",this.debug=o.debug||!1,this.modalStack={body:"",close:!0},this.modalVisible=!1,this.debug=!1,this.data={},this.windowModalname="windowModal",this.windowModalClass="windowModal",this.styles="<style type='text/css'>#windowModalMask { position:absolute; top:0; left:0; z-index:9000; background-color:#000; display:none; font-size: 2em; }#windowModalContainer .windowModal { position:fixed; width:340px; height:auto!important; display:none; z-index:9999; padding:25px 15px 20px 15px ; -moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius:3px;font-family: HelveticaNeueNormal,HelveticaNeue_Light,HelveticaNeue_Light2,xHelvetica,Arial;}.msie #windowModalContainer .windowModal{background-color:#FFF!important}  #windowModalContainer #windowModal { width:540px; height:303px; background:#FFF; }#windowModalContainer .windowModal p, #windowModalContainer .windowModal h4, #windowModalContainer .windowModal h3, #windowModalContainer .windowModal h2{font-family: HelveticaNeueNormal,HelveticaNeue_Light,HelveticaNeue_Light2,xHelvetica,Arial;display:inline;margin:5px 0 0 0;padding:0;width:100%;font-size:1.3em;color:#000;text-align:justify;line-height:1.2em}#windowModalContainer .windowModal p strong{color:#f60;font-weight:normal}#windowModalContainer .windowModal .closeBtn{float:right;display:inline;background-color:#FFF;padding:10px 13px;position:absolute;right:-7px;top:-10px;-moz-border-radius: 40px;-webkit-border-radius: 40px;border-radius:40px;font-size:1.3em;font-weight:bold;border:1px solid #CCC}.msie #windowModalContainer .windowModal .closeBtn{right:0;top:0}#windowModalContainer .windowModal span.titulo, #windowModalContainer .windowModal span.entradilla{float: left;display:inline;margin:0;padding:0;width:100%;font-family: HelveticaNeueNormal,HelveticaNeue_Light,HelveticaNeue_Light2,xHelvetica,Arial}#windowModalContainer .windowModal span.titulo, #windowModalContainer .windowModal h3, #windowModalContainer .windowModal h4{color:#f60;font-size:2.4em;margin-bottom:6px;text-align:left}#windowModalContainer .windowModal h4{font-size:2em}#windowModalContainer .windowModal span.entradilla{color:#000;font-size:1.6em;margin-bottom:10px;line-height:1.2em}#windowModalContainer .windowModal span.entradilla strong{color:#f60;font-weight:normal}#windowModalContainer .windowModal img{float:right;display:inline;margin:15px 0 0 2%;padding:0;width:48%;height:auto}#windowModalContainer .windowModal img.center{float:none;margin:0 auto 10px auto;text-align:center;display:block;width:auto}#windowModalContainer .windowModal ul{float:left;display:inline;margin:15px 0 0 0;padding:0;width:50%}#windowModalContainer .windowModal ul li{font-size:1.3em;line-height:1.2em;margin-top:5px;list-style:none;float:left;display:inline;width:100%;margin-bottom:5px}#windowModalContainer .windowModal ul li i.icon-cuadrado{float:left;display:block;margin:3px 3px 0 0;padding:0;}#windowModalContainer .windowModal #condiciones ul{width:100%}#windowModalContainer .windowModal #condiciones ul li{padding-left:2%;width:98%}#windowModalContainer .windowModal #condiciones p, #windowModalContainer .windowModal #condiciones h4{margin-bottom:5px} .windowModalBar { padding-left:10px; color:#FFF; font-weight:bold; background:#33F; position:relative; top:-20px; left:-20px; }.windowModal .close{background:#CCC; color:#000; width:40px; text-decoration:none; text-align:center; float:right; clear:right; position:relative; top:-20px; left:20px;}.windowModal tr.selected {background: none repeat scroll 0 0 #ff6600; color: #ffffff;}.windowModal tr.selected:hover {background: none repeat scroll 0 0 #ff9933; color: #000000;}#windowModalContainer .container:before{display:none}.windowModal .spinner { text-align: center; margin: 10px auto; width: 60px; height: 60px; animation: rotateSpinnerPopup 1.4s infinite ease-in-out, backgroundSpinnerPopup 1.4s infinite ease-in-out alternate; -webkit-animation: rotateSpinnerPopup 1.4s infinite ease-in-out, backgroundSpinnerPopup 1.4s infinite ease-in-out alternate; }@keyframes rotateSpinnerPopup { 0% { transform: perspective(120px) rotateX(0deg) rotateY(0deg); } 50% { transform: perspective(120px) rotateX(-180deg) rotateY(0deg); } 100% { transform: perspective(120px) rotateX(-180deg) rotateY(-180deg); } }@keyframes backgroundSpinnerPopup { 0% { background-color: #F60; } 50% { background-color: #000; } 100% { background-color: #FFF; } }@-webkit-keyframes rotateSpinnerPopup { 0% { transform: perspective(120px) rotateX(0deg) rotateY(0deg); } 50% { transform: perspective(120px) rotateX(-180deg) rotateY(0deg); } 100% { transform: perspective(120px) rotateX(-180deg) rotateY(-180deg); } }@-webkit-keyframes backgroundSpinnerPopup { 0% { background-color: #F60; } 50% { background-color: #000; } 100% { background-color: #FFF; } }</style>"},Popup.prototype.create=function(o){this.data=this.checkDataParams(o);var i,t=this.data,n=this,e="<div class='closeBtn'><a id='closeBtnModalUp' href='#'>"+("undefined"!=typeof t.XcloseHTML?t.XcloseHTML:"X")+"</a></div>",a="<div class='closeBtn'><a id='closeBtnModalDown' href='#'>X</a></div>",d=function(){n.closeModal()},l="undefined"==typeof t.wMClass?this.windowModalClass:t.wMClass;if(0===$("#"+this.windowModalname+"Container").length?$("body").append(this.styles+'<div id="'+this.windowModalname+'Container"><div id="'+this.windowModalname+'" class="'+l+" "+t.cssclass+'"></div><div id="'+this.windowModalname+'Mask"></div></div>'):$("#"+this.windowModalname).attr("class",l+" "+t.cssclass),""!==t.parentclass?$("#"+this.windowModalname+"Container").addClass(t.parentclass):$("#"+this.windowModalname+"Container").removeClass(),n.modalVisible=!0,this.adjustDimensions(),n.modalStack=this.data,t.close===!0&&(("up"==t.closePos||"both"==t.closePos)&&(t.body=e+t.body),("down"==t.closePos||"both"==t.closePos)&&(t.body=t.body+a)),""!==t.tagHtmlMsg&&(o.body="<"+t.tagHtmlMsg+">"+o.body+"</"+t.tagHtmlMsg+">"),$("#"+this.windowModalname).html(o.body),t.close===!0&&("undefined"==typeof t.onclose&&(t.onclose=function(){}),("up"==t.closePos||"both"==t.closePos)&&$("#closeBtnModalUp").on("click",function(){return n.closeModal()}),("down"==t.closePos||"both"==t.closePos)&&$("#closeBtnModalDown").on("click",function(){return n.closeModal()}),$("#"+this.windowModalname+"Mask").on("click",function(){return n.closeModal()})),t.spinner){var s=document.createElement("div");s.className="spinner",$("#"+this.windowModalname).append(s)}if("undefined"!=typeof t.buttons){$("#"+this.windowModalname+"ButtonsLayer").remove(),$("#"+this.windowModalname).append("<div id='"+this.windowModalname+"ButtonsLayer'></div>");for(i in t.buttons)$("#"+this.windowModalname+"ButtonsLayer").append("<input type='button' id='modalButton_"+i+"' value='"+t.buttons[i].value+"'>"),"undefined"==typeof t.buttons[i].close&&(t.buttons[i].close=!0),t.buttons[i].close&&$("#modalButton_"+i).on("click",d),$("#modalButton_"+i).on("click",t.buttons[i].callback)}n.showModal("#FFF")},Popup.prototype.showModal=function(o){"undefined"==typeof o&&(o="#FFF");var i=$(document).height(),t=$(window).width(),n=$(window).height(),e=$(window).width();this.data.width<1&&(this.data.width=e*this.data.width),this.data.height<1&&(this.data.height=n*this.data.height);var a=this.adjustDimensions(),d=a.wC,l=a.hC;$("#"+this.windowModalname+"Mask").css({width:t,height:i-40}),$("#"+this.windowModalname+"Mask").fadeTo("slow",.4),"undefined"!=typeof this.data.childrenId&&($("#"+this.data.childrenId).css("width",d),$("#"+this.data.childrenId).css("height",l)),$("#"+this.windowModalname).css({background:o}),$("#"+this.windowModalname).fadeIn(500)},Popup.prototype.adjustDimensions=function(){var o=this,i=$(window).height(),t=$(window).width(),n=569>t?.9*t:this.data.width,e=305>i?.9*i:this.data.height;return n=n>this.data.maxWidth&&this.data.width>=this.data.maxWidth?this.data.maxWidth:n,e=e>this.data.maxHeight&&this.data.height>=this.data.maxHeight?this.data.maxHeight:e,$("#"+this.windowModalname).css("width",n),$("#"+this.windowModalname).css("height",e),$("#"+this.windowModalname).css("max-width",n),$("#"+this.windowModalname).css("max-height",e),this.log("wC: "+n+", hC: "+e),o.centerModal(n,e,t,i),{wC:n,hC:e}},Popup.prototype.centerModal=function(o,i,t,n){var e=n/2-i/2,a=t/2-o/2,d=t/2-o/2,l=n/2-i/2;80>e&&(e=80),this.log("wW: "+d+", hW: "+l),$("#"+this.windowModalname).css("top",e),$("#"+this.windowModalname).css("left",a)},Popup.prototype.checkDataParams=function(o){var i=$(window).width(),t=$(window).height();return"undefined"==typeof o&&(o={body:"",width:.8*i,height:.8*t,maxWidth:.8*i,maxHeight:.8*t,close:!1,closePos:"up",cssclass:""}),"undefined"==typeof o.width&&(o.width=.8*i),"undefined"==typeof o.height&&(o.height=.8*t),"undefined"==typeof o.maxWidth&&(o.maxWidth=.8*i),"undefined"==typeof o.maxHeight&&(o.maxHeight=.8*t),"undefined"==typeof o.close&&(o.close=!0),"undefined"==typeof o.spinner&&(o.spinner=!1),"undefined"==typeof o.closePos&&(o.closePos="up"),"undefined"==typeof o.cssclass&&(o.cssclass=""),"undefined"==typeof o.parentclass&&(o.parentclass=""),"undefined"==typeof o.tagHtmlMsg&&(o.tagHtmlMsg=""),o},Popup.prototype.closeModal=function(){var o=this;return console.log("cierro y..."),o.hideModal(),"undefined"!=typeof this.data&&this.data.onclose(),!1},Popup.prototype.hideModal=function(){var o=this;o.modalVisible=!1,$("#"+this.windowModalname+"Mask").hide(),console.log("oculto MASK"),$("#"+this.windowModalname).fadeOut(500)},Popup.prototype.log=function(o){console&&this.debug&&console.log(o)},Popup}();
